# Container Manager Service Configuration

# API Gateway URL
API_GATEWAY_URL=http://localhost:4000

# Internal Service Authentication (Task 5.2B)
# Shared secret for authenticating internal API calls to api-gateway
# Must match the INTERNAL_SERVICE_KEY in api-gateway
# Generate with: openssl rand -hex 32
INTERNAL_SERVICE_KEY=change_this_in_production_use_a_long_random_hex_string

# Docker Configuration
DOCKER_HOST=unix:///var/run/docker.sock
CONTAINER_CPU_LIMIT=0.5
CONTAINER_MEMORY_LIMIT=1g
CONTAINER_DISK_LIMIT=3g

# Service Port
PORT=4002

# Preview Access Control (Task 7.4A)
# Enable JWT-based access control for public preview URLs
# When enabled: Only session owners can access their previews
# When disabled: Public access (default behavior from Phase 7.3C)
ENABLE_PREVIEW_ACCESS_CONTROL=false

# JWT Secret (must match api-gateway JWT_SECRET)
# Required when ENABLE_PREVIEW_ACCESS_CONTROL=true
JWT_SECRET=change_this_in_production_use_a_long_random_string

# ============================================================================
# Phase 8: Resource Governance (Task 8.1A)
# ============================================================================

# Session Lifecycle Limits
# Maximum session lifetime in milliseconds (default: 86400000 = 24 hours)
# Sessions older than this are candidates for cleanup
SESSION_MAX_LIFETIME_MS=86400000

# Session idle timeout in milliseconds (default: 1800000 = 30 minutes)
# Sessions inactive for this duration are candidates for auto-stop
SESSION_IDLE_TIMEOUT_MS=1800000

# Container Resource Limits (Phase 8)
# Note: CONTAINER_CPU_LIMIT already exists above in Docker Configuration
# CPU limit in cores (default: 0.5 = half a CPU core)
# CONTAINER_CPU_LIMIT=0.5

# Memory limit in megabytes (default: 512 MB)
# Used by governance system for container creation
CONTAINER_MEMORY_LIMIT_MB=512

# PIDs limit (default: 256 processes)
# Maximum number of processes allowed in container
CONTAINER_PIDS_LIMIT=256

# Execution Limits
# Maximum concurrent exec operations per session (default: 2)
# Prevents resource exhaustion from parallel command executions
MAX_CONCURRENT_EXECS_PER_SESSION=2
